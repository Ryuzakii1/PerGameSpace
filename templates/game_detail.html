{% extends "base.html" %}

{% block content %}
<div class="game-detail-container">
    <div class="game-detail-header">
        <h1>{{ game.title }}</h1>
        {# The game-actions div is moved below #}
    </div>

    <div class="game-info-grid">
        <div class="game-cover">
            <img src="{{ game.cover_url or url_for('static', filename='placeholder.png') }}" alt="Game Cover">
        </div>
        <div class="game-details">
            <p><strong>System:</strong> {{ game.system }}</p>
            {# Removed File Path: <p><strong>File Path:</strong> {{ game.filepath }}</p> #}
            {% if game.original_filename %}
                <p><strong>Original File Name:</strong> {{ game.original_filename }}</p>
            {% endif %}
            <p><strong>Last Played:</strong> {{ game.last_played or 'Never' }}</p>
            <p><strong>Play Count:</strong> {{ game.play_count }}</p>

            <div class="game-play-options">
                {# Existing Play/Download Buttons #}
                {% if web_emulator_url %}
                    <a href="{{ web_emulator_url }}" class="button primary">Play in Web Emulator</a>
                {% else %}
                    <button class="button primary" disabled title="Web emulation not available for this game/system">Play in Web Emulator</button>
                {% endif %}

                {% if desktop_emulator_url %}
                    <a href="{{ desktop_emulator_url }}" class="button primary">Launch on Desktop</a>
                {% else %}
                    <button class="button primary" disabled title="Desktop emulator not configured for this system">Launch on Desktop</button>
                {% endif %}

                {% if download_url %}
                    <a href="{{ download_url }}" class="button secondary">Download Game</a>
                {% else %}
                    <button class="button secondary" disabled title="Download not available for this game">Download Game</button>
                {% endif %}

                {# Moved Edit and Delete Buttons here #}
                <div class="game-actions" style="margin-top: 20px;"> {# Added margin for spacing #}
                    <a href="{{ url_for('library.edit_game', game_id=game.id) }}" class="button secondary">Edit Game</a>
                    <a href="{{ url_for('library.delete_game', game_id=game.id) }}" class="button danger" onclick="return confirm('Are you sure you want to delete {{ game.title }}? This cannot be undone.');">Delete Game</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
