{% extends "base.html" %}

{% block content %}
<h2>{{ current_display_title }}</h2>

{% if games %}
<div class="game-grid">
    {% for game in games %}
    <div class="game-card">
        {# This link is correct because it points to the 'library' blueprint with the /game/ prefix #}
        <a href="{{ url_for('library.game_detail', game_id=game.id) }}">
             <img src="{{ url_for('static', filename='covers/' + game.cover_image_path) if game.cover_image_path else url_for('static', filename='placeholder.png') }}" alt="{{ game.title }} Cover">
            <h3>{{ game.title }}</h3>
            <p>{{ game.system }}</p>
        </a>
    </div>
    {% endfor %}
</div>
{% else %}
{# --- ACTION REQUIRED: Point to the new 'navigation' blueprint --- #}
<p>No games found {% if current_system_name %}for {{ current_system_name }}{% endif %}. <a href="{{ url_for('fileman.upload_game') }}">Upload a new game</a>!</p>
{% endif %}
{% endblock %}