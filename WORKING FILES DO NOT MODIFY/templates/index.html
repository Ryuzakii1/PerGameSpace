{% extends "base.html" %}

{% block title %}Home - Your Game Library{% endblock %}

{% block content %}
    <header>
        <h1>üïπÔ∏è Welcome to Your Retro Game Collection!</h1>
        <p>Your personal hub for classic games. Dive in or add a new adventure!</p>
    </header>

    <section class="form-section">
        <h2>Recently Added Games</h2>
        <div class="game-grid">
            {% if games %}
                {% for game in games %}
                <div class="game-card">
                    <img src="{{ game.cover_url if game.cover_url else url_for('static', filename='images/default_cover.png') }}" 
                         alt="{{ game.title }} Cover">
                    <h2>{{ game.title }}</h2>
                    <p>System: {{ game.system }}</p>
                    <div class="game-actions"> 
                        <a href="{{ url_for('edit_game', game_id=game.id) }}" class="btn edit-btn">Edit</a>
                        <button type="button" class="btn delete-btn" onclick="confirmDelete('{{ game.title }}', '{{ game.id }}')">Delete</button>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-games-message">
                    <p>No games added yet! Get started by uploading your first game.</p>
                    <a href="{{ url_for('upload_game') }}" class="btn">Upload a Game</a>
                </div>
            {% endif %}
        </div>
        {% if games|length > 0 %}
        <div style="text-align: center; margin-top: 20px;">
            <a href="{{ url_for('library') }}" class="btn">View All Games in Library</a>
        </div>
        {% endif %}
    </section>
{% endblock %}

{% block scripts_extra %}
    <script>
        function confirmDelete(gameTitle, gameId) {
            if (confirm(`Are you sure you want to delete "${gameTitle}"? This cannot be undone.`)) {
                window.location.href = `/delete/${gameId}`;
            }
        }
    </script>
{% endblock %}